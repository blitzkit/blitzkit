---
import { asset, fetchTanksFull } from '@blitzkit/core';
import { Box, Flex, Text } from '@radix-ui/themes';
import { LinkI18n } from '../../../components/LinkI18n';
import { PageWrapper } from '../../../components/PageWrapper';
import { tanksTool } from '../../../constants/tools';
import ToolLayout from '../../../layouts/ToolLayout.astro';

export { getStaticPaths } from '../index.astro';

const locale = Astro.params.locale;
const tanksFull = await fetchTanksFull();
---

<ToolLayout tool={tanksTool}>
  <PageWrapper>
    {
      tanksFull.tanks
        .sort((a, b) => a.slug.localeCompare(b.slug))
        .map((tank) => {
          return (
            <LinkI18n {locale} href={`/tanks/${tank.slug}`}>
              <Flex align="center" gap="2">
                <Box
                  width="8rem"
                  height="6rem"
                  style={{
                    backgroundImage: `url(${asset(`tanks/${tank.id}/icons/big.webp`)})`,
                    backgroundSize: '150%',
                    backgroundPosition: 'center',
                  }}
                />
                <Text>{tank.name.locales.en}</Text>
              </Flex>
            </LinkI18n>
          );
        })
    }
  </PageWrapper>
</ToolLayout>
