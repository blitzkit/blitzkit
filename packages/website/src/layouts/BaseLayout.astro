---
import strings from "@blitzkit/i18n/strings/en.json";
import "@fontsource/inter";
import { Flex } from "@radix-ui/themes";
import Analytics from "../components/Analytics.astro";
import { BlitzKitTheme } from "../components/BlitzKitTheme";
import { Checks } from "../components/Checks";
import EasterEggs from "../components/EasterEggs.astro";
import Footer from "../components/Footer.astro";
import LocaleRedirector from "../components/LocaleRedirector.astro";
import Meta from "../components/Meta.astro";
import Navbar from "../components/Navbar.astro";
import Servicing from "../components/Servicing.astro";

export interface Props {
  noFooter?: boolean;
  noNavbar?: boolean;
  integrated?: boolean;
  locale: string;
}

const servicing = import.meta.env.SERVICING;
const { noFooter, noNavbar, integrated, locale } = Astro.props;
---

<html lang={locale}>
  <head>
    <meta property="og:site_name" content={strings.common.name} />

    <Meta />
    <Analytics />
    <LocaleRedirector />
    <EasterEggs />

    <slot name="head" />
  </head>

  <body class={noNavbar ? "no-navbar" : ""}>
    <BlitzKitTheme>
      <Flex direction="column" minHeight="100vh">
        <Navbar {locale} {integrated} />

        <Checks {locale} client:only="react" />

        {servicing ? <Servicing /> : <slot />}

        {!noFooter && <Footer {locale} />}
      </Flex>
    </BlitzKitTheme>
  </body>
</html>
