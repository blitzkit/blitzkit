---
import {
  GearIcon,
  HamburgerMenuIcon,
  MagnifyingGlassIcon,
} from "@radix-ui/react-icons";
import { BlitzKitIcon } from "../icons/BlitzKit";
import { LinkI18n } from "./LinkI18n";
import { Text } from "./Text";
import { api } from "../core/api/dynamic";

interface Props {
  locale: string;
}

const { locale } = Astro.props;
const strings = await api.strings(locale);
---

<style>
  #navbar {
    position: sticky;
    top: 0;
    left: 0;

    display: flex;
    justify-content: center;

    z-index: 1;
    background-color: var(--gray-3);
    box-shadow: var(--shadow-none);

    transition-duration: var(--duration-brief);

    &[data-sticky="true"] {
      background-color: var(--gray-a2);
      box-shadow: var(--shadow-subtle);
    }

    .content {
      flex: 1;
      max-width: calc(var(--page-width) + 2 * var(--space-4));

      display: flex;
      align-items: center;

      .action {
        flex: 1;

        display: flex;
        flex-direction: column;
        align-items: center;
        padding: var(--space-3);
        gap: var(--space-2);

        cursor: pointer;
        color: var(--color-regular);
        text-decoration: none;
        color: var(--gray-11);

        &[data-selected="true"] {
          color: var(--accent-12);

          .selector {
            background-color: var(--accent-5);
          }

          .label {
            color: var(--gray-12) !important;
          }
        }

        .selector {
          padding: var(--space-2);
          border-radius: var(--max-size);

          display: flex;
          justify-content: center;

          width: 100%;
          max-width: var(--space-6);

          .icon {
            width: 1.25em;
            height: 1.25em;
            vertical-align: top;
          }
        }

        .label {
          font-size: var(--font-size-minor);
        }
      }
    }
  }
</style>

<script>
  const navbar = document.getElementById("navbar")!;

  function handleScroll() {
    navbar.dataset.sticky = `${window.scrollY > 0}`;
  }

  handleScroll();
  window.addEventListener("scroll", handleScroll);
</script>

<div id="navbar">
  <div class="content">
    <LinkI18n {locale} href="/" className="action" tabIndex={0} data-selected>
      <div class="selector">
        <BlitzKitIcon className="icon" />
      </div>
      <Text lowContrast className="label">{strings.navbar.home}</Text>
    </LinkI18n>

    <LinkI18n {locale} href="/settings" className="action" tabIndex={0}>
      <div class="selector">
        <GearIcon className="icon" />
      </div>
      <Text lowContrast className="label">{strings.navbar.settings}</Text>
    </LinkI18n>
  </div>
</div>
