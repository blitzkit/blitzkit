---
import { CaretRightIcon } from '@radix-ui/react-icons';
import { Box, Button, Flex, Heading, Text } from '@radix-ui/themes';
import type { Tool } from '../constants/tools';
import { getStrings } from '../core/i18n/getStrings';
import { Var } from '../core/radix/var';
import { LinkI18n } from './LinkI18n';

interface Props {
  tool: Tool;
  locale: string;
}

const { tool, locale } = Astro.props;
const strings = await getStrings(locale);
const disabled = false;
const toolStrings =
  strings.website.tools[
    (tool.strings ?? tool.id) as keyof typeof strings.website.tools
  ];
---

<Flex
  style={{
    backgroundImage: `url(/assets/tool-backgrounds/${tool.id}.webp)`,
    backgroundSize: 'cover',
    backgroundPosition: 'center',
    borderRadius: Var('radius-2'),
  }}
  height={tool.significant ? '20rem' : '16rem'}
  data-disabled={disabled}
  data-significant={tool.significant}
  position="relative"
  overflow="hidden"
  flexGrow="1"
  flexBasis={tool.significant ? undefined : { initial: undefined, sm: '0' }}
>
  <LinkI18n
    {locale}
    className="link"
    underline="none"
    href={disabled ? '#' : `/${tool.id}`}
    style={{
      display: 'flex',
      width: '100%',
      height: '100%',
      flexDirection: 'column',
      color: 'inherit',
    }}
  >
    <Box
      flexGrow="1"
      style={{
        backgroundImage: `url(/assets/tool-backgrounds/${tool.id}.webp)`,
        backgroundSize: 'cover',
        backgroundPosition: 'center',
      }}
    />

    <Flex
      px={{ initial: '5', md: tool.significant ? '8' : '6' }}
      py={{ initial: '4', sm: tool.significant ? '6' : '4' }}
      gap="4"
      align="center"
      justify="between"
      width="100%"
      direction={{ initial: 'column', xs: 'row' }}
      style={{
        backgroundColor: 'var(--color-panel-translucent)',
        backdropFilter: 'blur(64px)',
        WebkitBackdropFilter: 'blur(64px)',
      }}
    >
      <Flex
        direction="column"
        justify="center"
        align={{ initial: 'center', xs: 'start' }}
      >
        <Heading
          align={{ initial: 'center', sm: 'left' }}
          size={{ initial: '6', sm: tool.significant ? '7' : '5' }}
          weight="medium"
        >
          {toolStrings.name}
        </Heading>
        <Text
          align={{ initial: 'center', sm: 'left' }}
          size={{ initial: '3', sm: tool.significant ? '4' : '3' }}
          color="gray"
        >
          {toolStrings.description}
        </Text>
      </Flex>

      {
        !disabled && (
          <Button
            highContrast={tool.button.contrast}
            size={{
              initial: undefined,
              sm: tool.significant ? '3' : undefined,
            }}
            color={tool.button.color}
            style={{ cursor: 'inherit' }}
          >
            {toolStrings.button}
            <CaretRightIcon />
          </Button>
        )
      }
    </Flex>
  </LinkI18n>
</Flex>
